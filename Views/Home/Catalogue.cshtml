@model List<TheBookCave.Models.ViewModels.BookViewModel>

<div class="row">
    <div class="col-md-3 jumbotron">
        <h2>The Catalogue</h2>
        <br>
        <form asp-action="FilteredCatalogue" asp-controller="Home" method="GET">
            <label>Minimum Price
                <input class="form-control" type="number" name="minPrice" />
            </label> <br/>
            <label>Maximum Price
                <input class="form-control" type="number" name="maxPrice" />
            </label> <br/>
            <label>Search Word
                <input class="form-control" type="text" name="searchWord" />
            </label> <br/>
            <label for="orderyby-dropdown">Ordery by</label>
            <select class="form-control" name="orderBy" id="orderby-dropdown">
                <option value="AlphaUp">Alphabet Up</option>
                <option value="AlphaDown">Alphabet Down</option>
                <option value="PriceUp">Price Up</option>
                <option value="PriceDown">Price Down</option>
                <option value="RatingUp">Rating Up</option>
                <option value="RatingDown">Rating Down</option>
                <option value="SellerUp">Seller Up</option>
                <option value="SellerDown">Seller Down</option>
                <option value="DatePublishedUp">Date Published Up</option>
                <option value="DatePublishedDown">Date Pubilshed Down</option>
            </select>
            <label for="genre-dropdown">Genre</label>
            <select class="form-control" name="genre" id="genre-dropdown">
                <option value="">Nothing Specific</option>
                <option value="Adventure">Adventure</option>
                <option value="Horror">Horror</option>
                <option value="Biography">Biography</option>
                <option value="War">War</option>
                <option value="Children">Children</option>
                <option value="Educational">Educational</option>
                <option value="Romance">Romance</option>
                <option value="Fantasy">Fantasy</option>
            </select> <br />
            <input class="btn btn-primary" type="submit" value="Filter!">
        </form>
    </div>

    <!--Displays books-->
    <div class="col-md-9">
        <br>
        @for(int i = 0; i < @Model.Count; i += 4)
        {
            <div class="row">
                @for(int j = 0; j < 4 && i + j < @Model.Count; j++)
                {
                <div class="col-md-3">
                @{int ind = i + j;}
                    <div class="thumbnail">
                        @{string path = Model[ind].Image;}
                        <img src=@Url.Content(path) alt="..." class="image-medium">
                        <div class="caption">
                            <h5 class="overflow-caption text-center"><a asp-controller="Book" asp-action="Details" asp-route-id="@Model[ind].ID">@Model[ind].Title</a></h5>
                            <h5 class="overflow-caption text-center">@Model[ind].Author</h5>

                            @{int intRating  = ((int)(((Model[ind].Rating * 4) + 1) / 2)) * 5; }
                            @{string stringRating = "~/images/stars/" + intRating + "StarsSmall.png"; }
                            <img src=@Url.Content(stringRating) alt="Rating" class="img-responsive center-block">
                            <h5 class="text-center">Price: @Model[ind].Price$</h5>
                            <p>
                                <form asp-action="AddToCart" asp-controller="Account" asp-route-id="@Model[ind].ID" method="POST">
                                    <button type="submit" class="center-block btn btn-primary btn-book-details">Add to Cart</button>
                                </form>
                            </p>
                        </div>
                    </div>
                </div>
                }
            </div>
            
        }
    </div>
</div>